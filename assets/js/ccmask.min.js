!function(t,e){"use strict";"function"==typeof define&&define.amd?define(["jquery"],e):e(t.jQuery)}(this,function(t){"use strict";function e(t){if(Object.keys)return Object.keys(t);if(t!==Object(t))throw new TypeError("Object.keys called on a non-object");var e,a=[];for(e in t)Object.prototype.hasOwnProperty.call(t,e)&&a.push(e);return a}function a(a,n){for(var s,i=e(n),u=0;u<i.length;u++)s=i[u],"submit"===s?t(a).parents("form").on(s,{ccmask:a},n[s]):t(a).on(s,n[s])}function n(a,n){for(var s,i=e(n),u=0;u<i.length;u++)s=i[u],"submit"===s?t(a).parents("form").off(s,{ccmask:a},n[s]):t(a).off(s,n[s])}function s(t){var e=[4,4,4,4];return/^(3[47])/.test(t)&&(e=[4,6,5]),/^(3(0[0123459]|[689]))/.test(t)&&(e=[4,6,4]),e}function i(t,e){e=e||[4,4,4,4];var a=t.split(""),n=[],s=0,i=0;do n=n.concat(a.slice(i,i+e[s])),n.push(" "),i+=e[s];while(s++<e.length);return n.join("").replace(/\s\s*$/,"")}function u(t){var e=new Array(t.length-t.slice(-3).length);return e.join("â€¢")+t.slice(-4)}function r(t,e){if(t.createTextRange){var a=t.createTextRange();a.move("character",e),a.select()}else t.selectionStart&&(t.focus(),t.setSelectionRange(e,e))}function l(t){t.setSelectionRange?r(t,t.value.length):t.value=t.value}var o={blur:!0,keyup:!1},c=t.valHooks.input;t.valHooks.text={get:function(e){var a=e.value;return c&&(a=c.get.apply(this,arguments)),t(e).data("ccmask")&&(a=t(e).data("unmaskedValue")),a},set:function(e,a){return t(e).data("ccmask")&&(a=a.replace(/[^0-9]+/,"").substring(0,16),t(e).data("unmaskedValue",a)),c&&(a=c.set.apply(this,arguments)),a}};var h={};return h.onBlur={keypress:function(t){var e=String.fromCharCode(t.charCode||t.which);(!/([0-9])/.test(e)||this.value.length>16)&&t.preventDefault()},keyup:function(){t(this).val(t(this).prop("value"))},blur:function(){var e=t(this).data("unmaskedValue"),a=i(u(e),s(e));t(this).hasClass("placeholder")||(t(this).prop("value",a),t(this).data("maskedValue",a))},focus:function(){t(this).prop("value",t(this).data("unmaskedValue"))},submit:function(e){var a=e.data.ccmask;return t(this).data("validator")&&!t(this).data("validator").element(a)?!1:void t(a).prop("value",t(a).data("unmaskedValue"))}},h.onKeyUp={mouseup:function(){l(this)},keydown:function(e){8===e.keyCode&&(t(this).val(t(this).val().substring(0,t(this).val().length-1)),t(this).prop("value",i(u(t(this).val()),s(t(this).val()))),e.preventDefault())},keypress:function(e){var a=String.fromCharCode(e.charCode||e.which);""===this.value&&t(this).val(""),/([0-9])/.test(a)&&t(this).val().length<16&&(""!==t(this).val()&&(a=t(this).val()+a),""!==a&&(t(this).val(a),t(this).prop("value",i(u(a))))),e.preventDefault()},keyup:function(){""===this.value&&t(this).val(""),l(this)},blur:function(){""===this.value&&t(this).val("")},paste:function(){var e=this;e.value="",t(e).val(""),setTimeout(function(){var a=e.value.replace(/[^0-9]+/,"").substring(0,16);t(e).val(a),t(e).prop("value",i(u(t(e).val()),s(t(e).val())))},100)},submit:function(e){var a=e.data.ccmask;return t(this).data("validator")&&!t(this).data("validator").element(a)?!1:void t(a).prop("value",t(a).data("unmaskedValue"))}},t.fn.ccmask=function(e){return e||(e=t.extend(o)),this.each(function(){t(this).data("ccmask")?(t(this).removeData("ccmask"),t(this).prop("value",t(this).data("unmaskedValue")),t(this).removeData("unmaskedValue"),e.blur?n(this,h.onBlur):e.keyup&&n(this,h.onKeyUp)):(t(this).data("unmaskedValue",this.value),t(this).data("ccmask",!0),t(this).val(t(this).data("unmaskedValue")),e.blur?a(this,h.onBlur):e.keyup&&a(this,h.onKeyUp))})},t.fn.ccmask});